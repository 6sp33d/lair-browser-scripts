var listHostsByVulnerabilityTitle = function (title) {
    // Retrieves all host, port, protocol instances afflicted by a certain vulnerability
    //
    // Created by: Dan Kottmann & updated by Alex Lauerman
    // Usage: listHostsByVulnerabilityTitle("Microsoft Windows SMB NULL Session Authentication");
    // Requires client-side updates: false

    var TITLE = title;
    var PROJECT_ID = Session.get('projectId');
    var vulnerability = Vulnerabilities.findOne({
        "project_id": PROJECT_ID,
        "title": TITLE
    });
    var msfHostsOutput = "";
    if (!vulnerability) {
        console.log("Vulnerability not found");
        return;
    }

    var hosts = vulnerability.hosts;
    hosts.forEach(function (host) {
        var realHost = Hosts.findOne({
            "project_id": PROJECT_ID,
            "string_addr": host.string_addr
        });
        console.log(host.string_addr + ":" + host.port + "/" + host.protocol);
        msfHostsOutput += host.string_addr + ", ";
    });
    //This outputs the hosts in metasploit hosts format.  Comment this out if you dont want it.
    console.log("RHOSTS: " + msfHostsOutput.slice(0, -2));
};